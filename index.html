<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Factory + Station</title>
<style>
body{margin:0;font-family:monospace;background:#071028;color:#eaf4ff}
header{padding:12px;text-align:center;background:#0f1b3a}
h1{margin:0;font-size:clamp(20px,3vw,34px)}
#wrapper{display:flex;gap:12px;padding:12px;flex-wrap:wrap;justify-content:center}
.panel{background:rgba(255,255,255,0.03);padding:12px;border-radius:10px;width:320px}
button{margin:4px 0;padding:6px 8px;border:none;border-radius:6px;background:#6fb3ff;color:#02112a;font-weight:700;cursor:pointer}
button:disabled{opacity:0.4;cursor:not-allowed}
.muted{color:#9fb5d9;font-size:13px}
.resource{display:flex;justify-content:space-between;padding:2px 0;border-bottom:1px dashed rgba(255,255,255,0.05)}
hr{border:0;border-top:1px dashed rgba(255,255,255,0.1);margin:8px 0}
</style>
</head>
<body>
<header>
<h1>ðŸŒŒ Space Factory + Station</h1>
<div class="muted">Build factories, unlock space, upgrade production, and decorate your station!</div>
</header>
<div id="wrapper">
<div class="panel">
<h3>Resources</h3>
<div id="resourcesList"></div>
<button onclick="manualMine()">Mine Ore</button>
<button onclick="manualEnergy()">Generate Energy</button>
<button onclick="asteroidMine()">Asteroid Mine</button>
<hr>
<h3>Factories</h3>
<div id="factoriesList"></div>
<hr>
<h3>Upgrades</h3>
<div id="upgradesList"></div>
</div>

<div class="panel">
<h3>Space Station Rooms</h3>
<div id="stationRooms"></div>
<div id="stationButtons"></div>
</div>
</div>

<script>
// ======== STATE ========
let state={
resources:{ore:0,metal:0,energy:0,crystal:0,alloy:0,circuit:0,fuelCell:0,shipPart:0,aiCore:0,nanofiber:0,quantumGel:0,darkMatter:0,hyperalloy:0},
factories:{oreFactory:0,energyGen:0,smelter:0,crystalExtractor:0,circuitFoundry:0,alloyForge:0,fuelProcessor:0,nanofiberLoom:0,quantumSynth:0,darkMatterHarvester:0,hyperalloyReactor:0},
stationRooms:{},
upgrades:{oreBoost:0,energyBoost:0,factoryBoost:0}
};

// ======== FACTORIES ========
const factories={
oreFactory:{name:"Ore Factory",cost:{ore:20},produce:{ore:1}},
energyGen:{name:"Energy Gen",cost:{ore:10},produce:{energy:1}},
smelter:{name:"Smelter",cost:{ore:50,energy:10},consume:{ore:3},produce:{metal:1}},
crystalExtractor:{name:"Crystal Extractor",cost:{ore:120,metal:40},produce:{crystal:0.25}},
circuitFoundry:{name:"Circuit Foundry",cost:{metal:200,crystal:50,energy:40},consume:{metal:1,crystal:1},produce:{circuit:1}},
alloyForge:{name:"Alloy Forge",cost:{metal:150,energy:60},consume:{metal:4},produce:{alloy:1}},
fuelProcessor:{name:"Fuel Processor",cost:{ore:100,energy:80},consume:{ore:3,energy:2},produce:{fuelCell:1}},
nanofiberLoom:{name:"Nanofiber Loom",cost:{alloy:1000,circuit:500,crystal:200},consume:{alloy:5,circuit:2,crystal:1},produce:{nanofiber:1}},
quantumSynth:{name:"Quantum Synthesizer",cost:{fuelCell:3000,metal:5000,crystal:2000},consume:{fuelCell:3,metal:5,crystal:1},produce:{quantumGel:1}},
darkMatterHarvester:{name:"Dark Matter Harvester",cost:{energy:1000000,metal:200000,aiCore:50000},consume:{energy:2000},produce:{darkMatter:1}},
hyperalloyReactor:{name:"Hyperalloy Reactor",cost:{nanofiber:2000,quantumGel:1000,alloy:2000},consume:{nanofiber:2,quantumGel:1,alloy:1},produce:{hyperalloy:1}}
};

// ======== UPGRADES ========
const upgradesData={
oreBoost:{name:"Ore Boost +1",cost:{metal:100,energy:50},effect:()=>{state.upgrades.oreBoost+=1}},
energyBoost:{name:"Energy Boost +1",cost:{metal:50,energy:20},effect:()=>{state.upgrades.energyBoost+=1}},
factoryBoost:{name:"Factory Production Boost",cost:{metal:1000,alloy:200},effect:()=>{state.upgrades.factoryBoost+=0.1}}
};

// ======== STATION ROOMS ========
const stationRoomsData={
coffeeMachine:{name:"Coffee Machine Room",cost:{metal:50,energy:20},desc:"Increases morale by 2000%. Totally useless."},
gym:{name:"Gym",cost:{metal:200,energy:50,circuit:10},desc:"Crew can skip leg day. No effect."},
retroArcade:{name:"Retro Arcade",cost:{metal:500,circuit:50},desc:"Adds Pac-Man noises."},
hydroGarden:{name:"Hydroponic Garden",cost:{metal:300,crystal:10},desc:"Plants that won't eat anyone."},
robloxExperienceRoom:{name:"ROBLOX EXPERIENCEâ„¢ ROOM",cost:{hyperalloy:5000000,darkMatter:1,circuit:200000,aiCore:99,coffeeMachine:1,gym:1},desc:"Your crew screams 'Oof' every 3 minutes."}
};

// ======== UTILS ========
function addResource(res,val){state.resources[res]=(state.resources[res]||0)+val;renderResources();}
function canAfford(cost){for(const k in cost){if((state.resources[k]||0)<cost[k])return false;}return true;}
function payCost(cost){for(const k in cost){state.resources[k]-=cost[k];}}
function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1);}

// ======== ACTIONS ========
function manualMine(){addResource('ore',1+state.upgrades.oreBoost);}
function manualEnergy(){addResource('energy',1+state.upgrades.energyBoost);}
function asteroidMine(){addResource('ore',Math.floor(Math.random()*200)+50);addResource('metal',Math.floor(Math.random()*60)+10);}

// Build factory
function buildFactory(key){
let f=factories[key];if(!f)return;
if(!canAfford(f.cost)){alert("Cannot afford "+f.name);return;}
payCost(f.cost);
state.factories[key]=(state.factories[key]||0)+1;
renderFactories();
}

// Build upgrade
function buildUpgrade(key){
let u=upgradesData[key];if(!u)return;
if(!canAfford(u.cost)){alert("Cannot afford "+u.name);return;}
payCost(u.cost);u.effect();renderUpgrades();renderResources();
}

// Build station room
function buildRoom(key){
let room=stationRoomsData[key];if(!room)return;
if(!canAfford(room.cost)){alert("Cannot afford "+room.name);return;}
payCost(room.cost);
state.stationRooms[key]=(state.stationRooms[key]||0)+1;
renderStationRooms();
if(key==='robloxExperienceRoom'){alert("ðŸŽ‰ Crew now screams 'Oof' every 3 minutes!");console.log("ROBLOX EXPERIENCE activated!");}
}

// ======== RENDER ========
function renderResources(){
let cont=document.getElementById('resourcesList');cont.innerHTML='';
for(const r in state.resources){
cont.innerHTML+=`<div class="resource"><span>${capitalize(r)}</span><span>${Math.floor(state.resources[r])}</span></div>`;
}}

function renderFactories(){
let cont=document.getElementById('factoriesList');cont.innerHTML='';
for(const k in factories){
let f=factories[k];let count=state.factories[k]||0;
cont.innerHTML+=`<div><strong>${f.name} x${count}</strong><br><button onclick="buildFactory('${k}')">Build ${f.name}</button></div>`;
}}

function renderUpgrades(){
let cont=document.getElementById('upgradesList');cont.innerHTML='';
for(const k in upgradesData){
let u=upgradesData[k];
cont.innerHTML+=`<div><strong>${u.name}</strong><br><button onclick="buildUpgrade('${k}')">Purchase ${u.name}</button></div>`;
}}

function renderStationRooms(){
let cont=document.getElementById('stationRooms');cont.innerHTML='';
for(const k in stationRoomsData){
let room=stationRoomsData[k];let count=state.stationRooms[k]||0;
cont.innerHTML+=`<div><strong>${room.name}</strong> x${count}<br><span class="muted">${room.desc}</span></div>`;
}
}

function renderStationButtons(){
let cont=document.getElementById('stationButtons');cont.innerHTML='';
for(const k in stationRoomsData){
let room=stationRoomsData[k];
cont.innerHTML+=`<button onclick="buildRoom('${k}')">Build ${room.name}</button>`;
}
}

// ======== AUTO PRODUCTION ========
function autoProduction(){
for(const k in state.factories){
let f=factories[k];if(!f)continue;let count=state.factories[k];if(count>0){
let prodMultiplier=1+state.upgrades.factoryBoost;
if(f.consume){let can=true;for(const r in f.consume){if((state.resources[r]||0)<f.consume[r]*count){can=false;break;}}if(!can)continue;for(const r in f.consume){state.resources[r]-=f.consume[r]*count;}}
if(f.produce){for(const r in f.produce){addResource(r,f.produce[r]*count*prodMultiplier);}}
}}
renderResources();
setTimeout(autoProduction,1000);
}

// ======== INIT ========
renderResources();
renderFactories();
renderUpgrades();
renderStationRooms();
renderStationButtons();
autoProduction();
</script>
</body>
</html>
